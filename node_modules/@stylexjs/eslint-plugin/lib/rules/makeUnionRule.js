"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = makeUnionRule;
var _makeLiteralRule = _interopRequireDefault(require("./makeLiteralRule"));
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
function makeUnionRule() {
  for (var _len = arguments.length, rules = new Array(_len), _key = 0; _key < _len; _key++) {
    rules[_key] = arguments[_key];
  }
  return (node, variables, prop) => {
    const failedRules = [];
    for (const _rule of rules) {
      const rule = typeof _rule === 'string' ? (0, _makeLiteralRule.default)(_rule) : typeof _rule === 'number' ? (0, _makeLiteralRule.default)(_rule) : _rule;
      const check = rule(node, variables, prop);
      if (check === undefined) {
        return undefined;
      }
      failedRules.push(check);
    }
    const fixable = failedRules.filter(a => a.suggest != null);
    fixable.sort((a, b) => (a.distance || Infinity) - (b.distance || Infinity));
    return {
      message: failedRules.map(a => a.message).join('\n'),
      suggest: fixable[0] != null ? fixable[0].suggest : undefined
    };
  };
}