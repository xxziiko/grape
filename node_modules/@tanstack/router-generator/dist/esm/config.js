import path from "node:path";
import { existsSync, readFileSync } from "node:fs";
import { z } from "zod";
const configSchema = z.object({
  routeFilePrefix: z.string().optional(),
  routeFileIgnorePrefix: z.string().optional().default("-"),
  routeFileIgnorePattern: z.string().optional(),
  routesDirectory: z.string().optional().default("./src/routes"),
  generatedRouteTree: z.string().optional().default("./src/routeTree.gen.ts"),
  quoteStyle: z.enum(["single", "double"]).optional().default("single"),
  semicolons: z.boolean().optional().default(false),
  disableTypes: z.boolean().optional().default(false),
  addExtensions: z.boolean().optional().default(false),
  disableLogging: z.boolean().optional().default(false),
  routeTreeFileHeader: z.array(z.string()).optional().default([
    "/* prettier-ignore-start */",
    "/* eslint-disable */",
    "// @ts-nocheck",
    "// noinspection JSUnusedGlobalSymbols"
  ]),
  routeTreeFileFooter: z.array(z.string()).optional().default(["/* prettier-ignore-end */"]),
  experimental: z.object({
    enableCodeSplitting: z.boolean().optional()
  }).optional()
});
function getConfig(inlineConfig = {}, configDirectory) {
  if (configDirectory === void 0) {
    configDirectory = process.cwd();
  }
  const configFilePathJson = path.resolve(configDirectory, "tsr.config.json");
  const exists = existsSync(configFilePathJson);
  let config;
  if (exists) {
    config = configSchema.parse({
      ...JSON.parse(readFileSync(configFilePathJson, "utf-8")),
      ...inlineConfig
    });
  } else {
    config = configSchema.parse(inlineConfig);
  }
  if (config.disableTypes) {
    config.generatedRouteTree = config.generatedRouteTree.replace(
      /\.(ts|tsx)$/,
      ".js"
    );
  }
  return config;
}
export {
  configSchema,
  getConfig
};
//# sourceMappingURL=config.js.map
